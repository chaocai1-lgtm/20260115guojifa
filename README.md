# 国际法知识图谱系统

## 📚 项目简介

本系统是基于**问题驱动教学法**的国际法知识图谱可视化系统，将54学时的国际法课程重构为**8个核心问题**，采用**规则-利益-争议**三层结构，结合**中国实践**案例，帮助学生建立系统的国际法知识体系。

### ✨ 核心特色

- **🎯 问题导向**：将传统章节式教学转变为8大核心问题
- **🌐 知识图谱**：可视化呈现知识点之间的关联关系
- **🇨🇳 中国实践**：突出中国对国际法的贡献和创新
- **📊 学习分析**：记录并分析学生的学习行为数据
- **💡 交互式学习**：点击节点即可查看详细内容和关联知识

## 🔢 8大核心问题

1. **① 国际法有约束力吗？** （8学时）
   - 国际法的性质、渊源、基本原则与强行法

2. **② 谁能在国际上说话？** （6学时）
   - 国际法主体、国家要素与国家权利

3. **③ 国家的"地盘"如何界定？** （12学时）
   - 领土法与海洋法（南海九段线、钓鱼岛等）

4. **④ 国家之间如何约定规则？** （8学时）
   - 条约法（中美上海公报等经典案例）

5. **⑤ 个人在国际法中处于什么位置？** （3学时）
   - 国籍、外国人待遇、引渡与庇护

6. **⑥ 国家如何跨国交往？** （6学时）
   - 外交与领事关系法

7. **⑦ 国际争端如何解决？** （5学时）
   - 和平解决争端与武力限制

8. **⑧ 中国为国际法贡献了什么？** （6学时）
   - 和平共处五项原则、人类命运共同体

## 🛠️ 技术架构

### 前端
- **Streamlit**：Python Web框架，快速构建交互式界面
- **PyVis**：基于vis.js的网络图可视化库
- **JavaScript**：增强图谱交互功能

### 后端
- **Neo4j**（可选）：图数据库，存储知识图谱和交互记录
- **JSON文件**：本地存储模式，无需数据库也可运行

### 数据结构
- **节点**：知识点（核心问题、理论、案例、章节等）
- **关系**：知识点之间的关联（包含、案例说明、中国实践等）
- **交互记录**：学生访问节点的行为数据

## 📦 安装部署

### 环境要求

- Python 3.8+
- Neo4j 4.0+（可选，建议安装）

### 安装步骤

1. **克隆或下载项目**

```bash
cd 国际法知识图谱
```

2. **安装Python依赖**

```bash
pip install streamlit pandas neo4j pyvis streamlit-javascript
```

3. **配置Neo4j（可选）**

如果使用Neo4j数据库：

- 安装Neo4j Desktop或Neo4j Server
- 启动Neo4j数据库
- 创建数据库，记录连接信息
- 修改`gjf_graph_main.py`中的配置：

```python
NEO4J_URI = "bolt://localhost:7687"
NEO4J_USER = "neo4j"
NEO4J_PASSWORD = "你的密码"
```

如果不使用Neo4j，系统会自动切换到本地文件模式。

4. **运行系统**

```bash
streamlit run gjf_graph_main.py
```

5. **访问系统**

浏览器自动打开，或访问 `http://localhost:8501`

## 📖 使用指南

### 学生端

1. **登录**
   - 在左侧侧边栏输入学号
   - 点击"✅ 登录"按钮

2. **浏览知识图谱**
   - 主界面显示完整知识图谱
   - 不同颜色代表不同类别的知识点
   - 可以缩放、拖动图谱

3. **查看节点详情**
   - **方式1**：点击图谱中的节点，右侧弹出详情面板
   - **方式2**：在左侧下拉菜单中选择节点

4. **探索关联知识**
   - 点击节点后，关联的节点和连线会高亮显示
   - 详情面板下方显示相关内容列表

### 管理端

1. **访问管理端**
   - 在左侧侧边栏选择"📊 管理端 - 数据分析"
   - 输入管理员密码（默认：`admin888`）

2. **查看整体统计**
   - 学生总数、访问次数
   - 节点访问热度排行
   - 活跃学生排行
   - 知识类别访问分布

3. **查询个人数据**
   - 选择学生学号
   - 查看该学生的访问历史和学习热点

4. **数据管理**
   - **初始化数据**：将JSON数据导入Neo4j
   - **下载数据**：导出CSV格式的交互记录
   - **清除数据**：清空所有交互记录

## 📁 文件说明

```
国际法知识图谱/
├── gjf_graph_main.py          # 主程序文件
├── 国际法知识图谱.json         # 知识图谱数据
├── interactions_log.json      # 本地交互记录（自动生成）
├── temp_graph.html            # 临时图谱文件（自动生成）
├── README.md                  # 说明文档
└── requirements.txt           # Python依赖列表
```

## 🎨 知识分类与颜色

| 类别 | 颜色 | 说明 |
|------|------|------|
| 核心问题 | 🔴 红色 | 8大核心问题 |
| 课程章节 | 🔵 青色 | 传统课本章节 |
| 中国实践 | 🟡 金色 | 中国的国际法贡献 |
| 典型案例 | 🟢 浅绿 | 重要案例分析 |
| 法律文本 | 🔷 浅蓝 | 核心公约和文件 |

## 🔧 自定义配置

### 修改管理员密码

在`gjf_graph_main.py`中修改：

```python
ADMIN_PASSWORD = "你的新密码"
```

### 修改数据库标签

如果多个课程共用一个Neo4j数据库，修改标签以区分：

```python
TARGET_LABEL = "InternationalLaw_2024"
```

### 调整图谱布局参数

在`create_knowledge_graph()`函数中调整：

```python
net.barnes_hut(
    gravity=-3000,           # 引力强度
    central_gravity=0.3,     # 中心引力
    spring_length=200        # 边的长度
)
```

## 📊 数据结构说明

### 节点（Node）

```json
{
  "id": "core_q1",
  "label": "① 国际法有约束力吗？",
  "category": "核心问题",
  "type": "问题导向",
  "level": 1,
  "description": "探讨国际法的性质、渊源、基本原则与强行法",
  "properties": {
    "课时": "8学时",
    "整合章节": "第2、3、4章",
    "核心议题": "国际法的法律效力与约束机制"
  }
}
```

### 关系（Relationship）

```json
{
  "source": "core_q1",
  "target": "q1_nature",
  "type": "包含",
  "description": "探讨国际法的法律性质"
}
```

## 🎓 教学应用建议

### 课前预习
- 学生登录系统浏览知识图谱
- 了解本节课的核心问题和关联知识
- 记录自己的疑问

### 课堂教学
- 投屏展示知识图谱
- 按照8大问题的顺序讲解
- 点击节点展示详细内容
- 强调知识点之间的关联

### 课后复习
- 学生自主探索知识图谱
- 查看相关案例和中国实践
- 系统记录学习轨迹

### 学情分析
- 教师登录管理端查看数据
- 分析学生的学习热点和盲区
- 针对性地调整教学策略

## 🐛 常见问题

### Q1: Neo4j连接失败怎么办？

**A**: 系统会自动切换到本地文件模式，功能基本不受影响。如需使用数据库功能：
- 检查Neo4j是否正常运行
- 检查连接配置是否正确
- 检查防火墙设置

### Q2: 图谱显示不完整？

**A**: 
- 尝试缩小浏览器窗口后再放大
- 刷新页面重新加载
- 检查JSON数据文件是否完整

### Q3: 如何添加新的知识点？

**A**: 
1. 编辑`国际法知识图谱.json`文件
2. 在`nodes`数组中添加新节点
3. 在`relationships`数组中添加关系
4. 重启系统或点击"初始化数据"

### Q4: 交互记录丢失？

**A**: 
- 检查`interactions_log.json`文件是否存在
- 如使用Neo4j，检查数据库连接
- 建议定期导出CSV备份

## 🔄 更新日志

### v1.0 (2026-01-05)
- ✅ 完成8大核心问题的知识图谱构建
- ✅ 实现学生端浏览和交互功能
- ✅ 实现管理端数据分析功能
- ✅ 支持Neo4j和本地文件双模式
- ✅ 集成中国实践案例和思政内容

## 📝 待完善功能

- [ ] 增加搜索功能
- [ ] 支持知识点笔记功能
- [ ] 生成个性化学习路径
- [ ] 增加测验和评估功能
- [ ] 支持多语言切换
- [ ] 移动端适配

## 👥 贡献者

- **课程组**：国际法教学创新团队
- **技术支持**：基于开源项目改编

## 📄 许可证

本项目仅供教学使用，未经许可不得用于商业目的。

## 📞 联系方式

如有问题或建议，请联系课程组。

---

**⚖️ 让国际法学习变得更加系统和有趣！**
